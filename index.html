<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TANTI AUGURI AMORE MIO ❤️</title>
  <meta name="description" content="A special gift just for you. Love vouchers." />
  <meta name="theme-color" content="#FFFBE2" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='84'%3E%F0%9F%92%96%3C/text%3E%3C/svg%3E">

  <!-- Font per il sottotitolo -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#FFFBE2;           /* giallo pastello chiarissimo */
      --ink:#C21807;          /* rosso ciliegia */
      --card:#FFFAD1;         /* card un filo più chiare */
      --accent:#C21807;
      --accent-2:#E64747;
      --shadow:0 8px 24px rgba(0,0,0,.08);
      --radius:16px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:1.6}

    /* Hero */
    .hero{position:relative;padding:64px 16px 40px}
    .hero-inner{max-width:960px;margin:0 auto;text-align:center}
    h1{margin:0 0 6px;font-size:clamp(32px,5vw,56px);letter-spacing:.4px}
    .subtitle{margin:0 0 24px;font-family:"Dancing Script",cursive;font-size:clamp(22px,3.2vw,34px);font-weight:700}
    #confetti{position:absolute;inset:0;width:100%;height:100%;pointer-events:none}

    /* CTA */
    .cta{display:grid;justify-items:center;gap:12px;margin-top:18px}
    .cta small{font-size:13px;opacity:.9;text-transform:uppercase;letter-spacing:.5px}
    .gift-btn{margin-top:24px;border:0;background:transparent;cursor:pointer;width:136px;height:136px;position:relative}
    .gift-btn svg{width:100%;height:100%;transition:transform .25s ease}
    .gift-btn:hover svg{transform:translateY(-3px)}

    /* Sezioni */
    main{max-width:1000px;margin:0 auto;padding:24px 16px 56px}
    section{margin:24px 0;background:rgba(255,255,255,.5);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow)}
    section h2{margin:0 0 8px;text-align:center}

    /* Vouchers */
    .vouchers[hidden]{display:none}
    .vouchers{opacity:0;transform:translateY(10px);transition:opacity .28s ease,transform .28s ease}
    .vouchers.reveal{opacity:1;transform:translateY(0)}
    .vouchers-header p{margin:6px auto 16px;font-size:14px;max-width:800px;text-align:center}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px}
    .voucher{
      background:var(--card);
      border:1px dashed rgba(194,24,7,.55);
      border-radius:14px;padding:14px;min-height:150px;
      display:flex;flex-direction:column;gap:10px
    }
    .voucher-title{font-weight:800;text-transform:uppercase;letter-spacing:.3px;margin:0}
    .voucher-body{font-style:italic;margin:0}
    .voucher-body::first-letter{ text-transform:uppercase }
    .voucher-meta{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .meta-right{font-size:12px;opacity:.9}
    .redeemBtn{padding:6px 10px;border-radius:999px;border:1px solid rgba(194,24,7,.35);background:rgba(194,24,7,.08);color:var(--ink);cursor:pointer;font-size:12px}
    .voucher[data-redeemed="true"]{opacity:.88;border-style:solid}
    .date-badge{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(194,24,7,.08);border:1px solid rgba(194,24,7,.25)}

    @media (prefers-reduced-motion:reduce){.vouchers{transition:none;transform:none}}
    @media print{
      body{background:#fff;color:#000}
      .hero{display:none}
      main{padding:0}
      section{box-shadow:none;background:#fff}
      .voucher{background:#fff;border:1px dashed #c00}
      .redeemBtn{display:none}
    }
  </style>
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <h1>TANTI AUGURI AMORE MIO ❤️</h1>
      <p class="subtitle">A special gift just for you</p>

      <div class="cta">
        <small>CLICCA PER SPACCHETTARE IL TUO REGALO</small>
        <button id="openGift" class="gift-btn" aria-controls="vouchers" aria-expanded="false">
          <!-- Pacchetto realistico SVG -->
          <svg viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <!-- ombra morbida -->
            <ellipse cx="64" cy="114" rx="38" ry="8" fill="rgba(0,0,0,.10)"/>
            <!-- scatola -->
            <rect x="20" y="46" width="88" height="64" rx="8" fill="#C21807"/>
            <rect x="20" y="46" width="88" height="64" rx="8" fill="url(#g1)" opacity=".15"/>
            <!-- coperchio -->
            <rect x="16" y="32" width="96" height="26" rx="8" fill="#E64747"/>
            <rect x="16" y="32" width="96" height="26" rx="8" fill="url(#g2)" opacity=".18"/>
            <!-- nastri -->
            <rect x="60" y="32" width="8" height="78" rx="2" fill="#FFD2D2"/>
            <rect x="16" y="58" width="96" height="8" rx="2" fill="#FFD2D2"/>
            <!-- fiocco -->
            <g transform="translate(64 30)">
              <path d="M0 0 C -18 -14, -30 -2, -16 8 C -8 12, -2 10, 0 6 Z" fill="#FFD2D2"/>
              <path d="M0 0 C 18 -14, 30 -2, 16 8 C 8 12, 2 10, 0 6 Z" fill="#FFD2D2"/>
              <circle cx="0" cy="6" r="4" fill="#FFD2D2"/>
            </g>
            <!-- gradienti -->
            <defs>
              <linearGradient id="g1" x1="0" y1="46" x2="0" y2="110">
                <stop offset="0" stop-color="#fff" stop-opacity=".6"/>
                <stop offset="1" stop-color="#000" stop-opacity="0"/>
              </linearGradient>
              <linearGradient id="g2" x1="16" y1="32" x2="112" y2="58">
                <stop offset="0" stop-color="#fff" stop-opacity=".5"/>
                <stop offset="1" stop-color="#000" stop-opacity="0"/>
              </linearGradient>
            </defs>
          </svg>
        </button>
      </div>
    </div>
    <canvas id="confetti"></canvas>
  </header>

  <main>
    <!-- LOVE VOUCHERS -->
    <section id="vouchers" class="vouchers" hidden>
      <div class="vouchers-header">
        <h2>LOVE VOUCHERS</h2>
        <p><strong>Avvertenze:</strong> Questi voucher potrebbero causare dipendenza affettiva e l'uso improprio potrebbe provocare effetti collaterali come eccesso di dolcezza e amore. Utilizzare con moderazione (forse). Scadenza: illimitata.</p>
      </div>

      <div class="grid" id="voucherGrid">
        <!-- 1 -->
        <article class="voucher" data-redeemed="false" data-idx="1">
          <header class="voucher-title">GRATTINI</header>
          <p class="voucher-body">Questo voucher dà diritto ad una sessione della durata di 30 minuti di grattini a scelta.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 2 -->
        <article class="voucher" data-redeemed="false" data-idx="2">
          <header class="voucher-title">MASSAGGIO RILASSANTE</header>
          <p class="voucher-body">Questo voucher dà diritto ad un massaggio rilassante completo della durata di 60 minuti.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 3 -->
        <article class="voucher" data-redeemed="false" data-idx="3">
          <header class="voucher-title">SERATA FILM</header>
          <p class="voucher-body">Questo voucher ti dà il diritto di scegliere un film che vuoi tu, con snack che desideri offerti o cena sul divano.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 4 -->
        <article class="voucher" data-redeemed="false" data-idx="4">
          <header class="voucher-title">COMANDI TU</header>
          <p class="voucher-body">Per una giornata intera si farà tutto ciò che desideri, qualsiasi cosa.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 5 -->
        <article class="voucher" data-redeemed="false" data-idx="5">
          <header class="voucher-title">COLAZIONE A LETTO</header>
          <p class="voucher-body">La tua colazione a scelta direttamente a letto, utilizzare il voucher con anticipo.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 6 -->
        <article class="voucher" data-redeemed="false" data-idx="6">
          <header class="voucher-title">CHEF PERSONALE</header>
          <p class="voucher-body">Utilizzando questo voucher, il beneficiario potrà godere di una cena a scelta preparata dal partner che si dovrà occupare di tutto, dalla spesa alla pulizia della cucina.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 7 -->
        <article class="voucher" data-redeemed="false" data-idx="7">
          <header class="voucher-title">FANTASIA PICCANTE</header>
          <p class="voucher-body">Questo buono dà il diritto alla realizzazione di qualsiasi fantasia da parte del partner.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 8 -->
        <article class="voucher" data-redeemed="false" data-idx="8">
          <header class="voucher-title">BOCCONOTTO NOW</header>
          <p class="voucher-body">Questo voucher dà il diritto a ricevere nell'immediato un bocconotto.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 9 -->
        <article class="voucher" data-redeemed="false" data-idx="9">
          <header class="voucher-title">GAME NIGHT</header>
          <p class="voucher-body">Serata game a scelta, che siano giochi da tavola, giochi online o bowling.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
        <!-- 10 -->
        <article class="voucher" data-redeemed="false" data-idx="10">
          <header class="voucher-title">CINEMA</header>
          <p class="voucher-body">Questo buono dà il diritto di usufruire di una serata cinema con film a scelta, tutto offerto.</p>
          <div class="voucher-meta">
            <button class="redeemBtn" type="button">Riscatta</button>
            <div class="meta-right"></div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <script>
    // Mostra i vouchers al click
    (function(){
      const btn=document.getElementById("openGift");
      const sec=document.getElementById("vouchers");
      btn.addEventListener("click",()=>{
        sec.hidden=false;
        void sec.offsetHeight;               // trigger transizione CSS
        sec.classList.add("reveal");
        btn.setAttribute("aria-expanded","true");
        sec.scrollIntoView({behavior:"smooth"});
      });
    })();

    // Utilità data IT
    function todayIT(){
      const d=new Date();
      return `${String(d.getDate()).padStart(2,"0")}/${String(d.getMonth()+1).padStart(2,"0")}/${d.getFullYear()}`;
    }
    function isValidITDate(str){
      if(!/^\d{2}\/\d{2}\/\d{4}$/.test(str)) return false;
      const [dd,mm,yyyy]=str.split("/").map(n=>parseInt(n,10));
      const dt=new Date(yyyy,mm-1,dd);
      return dt.getFullYear()===yyyy&&dt.getMonth()===(mm-1)&&dt.getDate()===dd;
    }

    // Carica stato salvato
    function loadState(){
      document.querySelectorAll(".voucher").forEach(v=>{
        const idx=v.dataset.idx;
        const redeemed=localStorage.getItem(`voucher_${idx}_redeemed`)==="1";
        const date=localStorage.getItem(`voucher_${idx}_date`)||"";
        const btn=v.querySelector(".redeemBtn");
        const meta=v.querySelector(".meta-right");
        if(redeemed){
          v.dataset.redeemed="true";
          btn.textContent="Riscattato";
          if(date) meta.innerHTML=`<span class="date-badge">Riscattato il: ${date}</span>`;
        }
      });
    }

    // Riscatta → persist + data
    document.addEventListener("click", (e)=>{
      if(!e.target.classList.contains("redeemBtn")) return;
      const card=e.target.closest(".voucher");
      const idx=card.dataset.idx;
      const meta=card.querySelector(".meta-right");
      const already=card.dataset.redeemed==="true";

      if(!already){
        let date=prompt("Inserisci la data di riscatto (GG/MM/AAAA):", todayIT());
        if(!date) return;
        if(!isValidITDate(date)){ alert("Formato non valido. Usa GG/MM/AAAA."); return; }
        card.dataset.redeemed="true";
        e.target.textContent="Riscattato";
        localStorage.setItem(`voucher_${idx}_redeemed`,"1");
        localStorage.setItem(`voucher_${idx}_date`,date);
        meta.innerHTML=`<span class="date-badge">Riscattato il: ${date}</span>`;
      }
      // Se vuoi poter annullare il riscatto, scommenta le righe sotto:
      // else {
      //   if(confirm("Vuoi annullare il riscatto?")){
      //     card.dataset.redeemed="false";
      //     e.target.textContent="Riscatta";
      //     localStorage.removeItem(`voucher_${idx}_redeemed`);
      //     localStorage.removeItem(`voucher_${idx}_date`);
      //     meta.innerHTML="";
      //   }
      // }
    });

    // Confetti leggeri
    (function confetti(){
      const c=document.getElementById("confetti"),x=c.getContext("2d");
      function resize(){ c.width=c.offsetWidth; c.height=c.offsetHeight; }
      window.addEventListener("resize",resize); resize();
      let pieces=Array.from({length:120},()=>({x:Math.random()*c.width,y:Math.random()*-c.height,r:4+Math.random()*6,d:1+Math.random()*2,t:Math.random()*Math.PI}));
      (function draw(){
        x.clearRect(0,0,c.width,c.height);
        for(const p of pieces){
          x.save(); x.translate(p.x,p.y); x.rotate(p.t);
          x.fillStyle=Math.random()>.5?"#C21807":"#E64747";
          x.fillRect(-p.r/2,-p.r/2,p.r,p.r*.6);
          x.restore();
          p.y+=p.d; p.x+=Math.sin(p.y/25)*.8; p.t+=.02;
          if(p.y>c.height+20){ p.y=-10; p.x=Math.random()*c.width; }
        }
        requestAnimationFrame(draw);
      })();
    })();

    // Inizializza stato voucher
    loadState();
  </script>
</body>
</html>
